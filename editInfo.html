<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>MemeMaster</title>
	<link rel="stylesheet" href="css/editpage.css"/>
</head>
<body>
	<header>
 		<div class="header" id = "logo">logo</div>
 		<div class="header" id = "site-name">MemeMaster</div>
	</header>
	<div class="login">
		<div>Username:</div>
		<input id="username" maxlength="150">
		<div>Password:</div>
		<input id="pw" type="password" maxlength="150">
		<button class="button" id="butt">Login</button>
	</div>

	<div id = "main">
		<div id = "top-panel">
			<div id = "add-bar">
				<input id="addbox" type="url" maxlength="200" placeholder="Paste URL here to add Meme!">
			</div>
			<div id = "add-button">add button</div>
		</div>
		<div id = "bottom-panel">
			<div id = "left-panel">
				<div id = "search">
					<input id="searchbox" type="search" placeholder="search">
				</div>
				<div class = "category">
					<a id="cat1" href="#">All Category</a>
				</div>
				<div class = "category">
					<a id="cat2" href="#">category 1</a>
				</div>
				<div class = "category">
					<a id="cat3" href="#">category 2</a>
				</div>
				<div class = "category">
					<a id="cat4" href="#">category 3</a>
				</div>
			</div>
			<div id = "right-panel">
				<div id = "content-view">content view
					<section class="container">
						<div id="coverflow">
							<figure id="fig1" cp="-200" a="60" onclick="moveTo(this)"><img src="pic/meme1.png"/></figure>
							<figure id="fig2" cp="-150" a="60" onclick="moveTo(this)"><img src="pic/meme2.png"/></figure>
							<figure id="fig3" cp="-100" a="60" onclick="moveTo(this)"><img src="pic/meme3.png"/></figure>
							<figure id="fig4" cp="0" a="60" onclick="moveTo(this)"><img src="pic/meme4.png"/></figure>
							<figure id="fig5" cp="100" a="60" onclick="moveTo(this)"><img src="pic/meme5.png"/></figure>
							<figure id="fig6" cp="150" a="60" onclick="moveTo(this)"><img src="pic/meme6.png"/></figure>
							<figure id="fig7" cp="200" a="60" onclick="moveTo(this)"><img src="pic/meme7.png"/></figure>
						</div>
					</section>
					
					<input class="pushBtn" type="button" value="Prev" onclick="left()" data="1"></div>
					<input class="pushBtn" type="button" value="Next" onclick="right()" data="-1"></div>
				
				</div>

				<div class="edit" style="float: right; right: 120px;">
					<b class="edit">Name:</b><input class="edit" placeholder="WTF Patrick Stewart">
					<b class="edit">Comment:</b><input class="edit" placeholder="Testing Comment">
					<div class="rating">
						<span>&#9734</span><span>&#9734</span><span>&#9734</span><span>&#9734</span><span>&#9734</span>
					</div>

				</div>	
			</div>
		</div>
	</div>


	<footer>
		<nav>
			<a href='#' id="tou">Terms of Use</a> |
			<a href='team-page.html' id="contactus">Contact Us</a> |
			<a href="#" id="helplink">Help</a>
		</nav>
	</footer>

	<script type="text/javascript">
		var min = 1;
        var max = 7;
        var current = 4;
        var currPos = 0;
        var newPos = 0;
        var currAngle = 0;
        var newAngle = 0;
        var gap = 50;
        var clickedIndex = 0;      
        var diff = 0;
        window.onload = function() {
        	initialThrust();
        }

        function initialThrust() {
            setTimeout(function() {
            	document.getElementById("fig1").style.webkitTransform = "translateX(-200px) rotateY(60deg)";
                document.getElementById("fig2").style.webkitTransform = "translateX(-150px) rotateY(60deg)";
                document.getElementById("fig3").style.webkitTransform = "translateX(-100px) rotateY(60deg)";
                document.getElementById("fig4").style.webkitTransform = "translateX(0px) rotateY(0deg) translateZ(200px)";
                document.getElementById("fig5").style.webkitTransform = "translateX(100px) rotateY(-60deg)";
                document.getElementById("fig6").style.webkitTransform = "translateX(150px) rotateY(-60deg)";
                document.getElementById("fig7").style.webkitTransform = "translateX(200px) rotateY(-60deg)";
            }, 500);
        }   
      
        function moveTo(targetObj) {                    
            //console.log(targetObj.id);          
                clickedIndex = parseInt(targetObj.id.slice(3, 4));
                if (clickedIndex > current) {
                    //move right to the clicked index
                    console.log("Move right: " + clickedIndex + "/" + current + "/" + (clickedIndex - current));
                    diff = clickedIndex - current;
                    for (var i = 1; i <= diff; i++) {
                        right();
                    }
                }
                else if (clickedIndex < current) {
                    //move left to the clicked index
                    console.log("Move left: " + clickedIndex + "/" + current + "/" + (current - clickedIndex));
                    diff = (current - clickedIndex);
                    for (var i = 1; i <= diff; i++) {
                        left();
                    }
                }
                else {
                    //same element is clicked....do nothing
                }         
        }
        function left() {
            //alert('test');
            if (current > min) {
                current--;
                //console.log("Left: " + current);              

                for (var i = 1; i <= max; i++) {
                    currPos = document.getElementById("fig" + i).getAttribute("cp");
                    currAngle = document.getElementById("fig" + i).getAttribute("a");
                    if (currPos == "-100" || currPos == "0") {
                        newPos = parseInt(currPos) + (gap * 2) * (1);
                        if (currPos == "0") {
                            newAngle = -60;
                        }
                        else if (currPos = "-100") {
                            newAngle = 0;
                        }
                        else {
                        }
                    }
                    else {
                        newPos = parseInt(currPos) + (gap) * (1);
                        newAngle = parseInt(currAngle);
                    }
                    //console.log("Curr: " + currPos + " / New: " + newPos);
                    //console.log("Curr angle: " + currAngle + " / New Angle: " + newAngle);
                    if (i == current) {
                        document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
                    }
                    else {
                        document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
                    }
                    document.getElementById("fig" + i).setAttribute("cp", newPos);
                    document.getElementById("fig" + i).setAttribute("a", newAngle);
                }
            }
        }
        function right() {
            if (current < max) {
                current++;
                //console.log("Right: " + current);              

                for (var i = 1; i <= max; i++) {
                    currPos = document.getElementById("fig" + i).getAttribute("cp");
                    currAngle = document.getElementById("fig" + i).getAttribute("a");
                    if (currPos == "100" || currPos == "0") {
                        newPos = parseInt(currPos) + (gap * 2) * (-1);
                        if (currPos == "0") {
                            newAngle = 60;
                        }
                        else if (currPos = "100") {
                            newAngle = 0;
                        }
                        else {
                        }
                    }
                    else {
                        newPos = parseInt(currPos) + (gap) * (-1);
                        newAngle = parseInt(currAngle);
                    }
                    //console.log("Curr: " + currPos + " / New: " + newPos);
                    //console.log("Curr angle: " + currAngle + " / New Angle: " + newAngle);
                    if (i == current) {
                        document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
                    }
                    else {
                        document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
                    }
                    document.getElementById("fig" + i).setAttribute("cp", newPos);
                    document.getElementById("fig" + i).setAttribute("a", newAngle);
                }
            }
        }
	</script>
	

</body>